<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareerVerse</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #ffffff;
            color: #333;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Intro Screen */
        .intro-screen {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #ffffff 0%, #f8f8f8 100%);
            position: relative;
            overflow: hidden;
        }

        .intro-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 0, 0, 0.1) 0%, transparent 50%);
            z-index: 1;
        }

        .logo-container {
            position: relative;
            z-index: 2;
            text-align: center;
            margin-bottom: 40px;
        }

        .logo {
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(90deg, #e60000, #ff3333, #e60000);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 4px 15px rgba(230, 0, 0, 0.3);
            animation: pulse 2s infinite;
            position: relative;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .start-btn {
            padding: 16px 40px;
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            background: linear-gradient(90deg, #e60000, #ff3333);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(230, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            z-index: 2;
        }

        .start-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 12px 30px rgba(230, 0, 0, 0.6);
        }

        /* Question Screen */
        .question-screen {
            display: none;
            padding: 50px 20px;
            background: white;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            color: #e60000;
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .progress-bar {
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e60000, #ff3333);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .question-container {
            background: white;
            border: 2px solid #ffeded;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(230, 0, 0, 0.1);
            text-align: center;
        }

        .question-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #e60000;
        }

        .question-text {
            font-size: 2rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 40px;
            line-height: 1.4;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        @media (min-width: 768px) {
            .options-container {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (min-width: 1024px) {
            .options-container {
                grid-template-columns: 1fr 1fr 1fr;
            }
        }

        .option-btn {
            padding: 25px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            background: #fff;
            border: 2px solid #ff3333;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-btn:hover {
            background: #ffe6e6;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(230, 0, 0, 0.2);
        }

        /* Recommendation Screen */
        .recommendation-screen {
            display: none;
            padding: 50px 20px;
            background: white;
        }

        .screen-title {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 800;
            color: #e60000;
            margin-bottom: 20px;
        }

        .screen-subtitle {
            text-align: center;
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 50px;
        }

        .career-card {
            background: linear-gradient(135deg, #ffffff, #fff0f0);
            border: 2px solid #ff3333;
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 15px 40px rgba(230, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
            transition: all 0.5s ease;
        }

        .career-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(230, 0, 0, 0.25);
        }

        .career-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 30px;
        }

        .career-icon {
            font-size: 5rem;
        }

        .career-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: #e60000;
            text-align: center;
        }

        .career-description {
            font-size: 1.3rem;
            color: #333;
            text-align: center;
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .career-details {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (min-width: 768px) {
            .career-details {
                grid-template-columns: 1fr 1fr;
            }
        }

        .detail-section h3 {
            font-size: 1.3rem;
            font-weight: 700;
            color: #e60000;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .detail-section h3::before {
            content: '';
            display: inline-block;
            width: 10px;
            height: 10px;
            background: #e60000;
            border-radius: 50%;
            margin-right: 10px;
        }

        .skills-list {
            list-style: none;
        }

        .skills-list li {
            padding: 8px 0;
            color: #555;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .skills-list li::before {
            content: '‚Ä¢';
            color: #e60000;
            font-weight: bold;
            margin-right: 10px;
        }

        .demand-level {
            background: #ffe6e6;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 700;
            color: #e60000;
            text-align: center;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
        }

        .action-btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .primary-btn {
            background: linear-gradient(90deg, #e60000, #ff3333);
            color: white;
            border: none;
            box-shadow: 0 5px 15px rgba(230, 0, 0, 0.3);
        }

        .primary-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(230, 0, 0, 0.4);
        }

        .secondary-btn {
            background: white;
            color: #e60000;
            border: 2px solid #e60000;
        }

        .secondary-btn:hover {
            background: #ffe6e6;
        }

        .favorite-btn {
            background: white;
            color: #e60000;
            border: 2px solid #e60000;
        }

        .favorite-btn.favorited {
            background: #ffdddd;
            color: #cc0000;
            border-color: #cc0000;
        }

        .reset-btn {
            background: #333;
            color: white;
            border: 2px solid #333;
        }

        .reset-btn:hover {
            background: #555;
            transform: translateY(-3px);
        }

        .other-careers {
            margin-top: 60px;
        }

        .other-careers-title {
            text-align: center;
            font-size: 2rem;
            font-weight: 700;
            color: #e60000;
            margin-bottom: 40px;
        }

        .careers-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        @media (min-width: 768px) {
            .careers-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (min-width: 1024px) {
            .careers-grid {
                grid-template-columns: 1fr 1fr 1fr;
            }
        }

        .career-option {
            background: white;
            border: 2px solid #f0f0f0;
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .career-option:hover {
            border-color: #e60000;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(230, 0, 0, 0.1);
        }

        .career-option-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #e60000;
        }

        .career-option-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
        }

        .career-option-desc {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        /* Institutions Screen */
        .institutions-screen {
            display: none;
            padding: 50px 20px;
            background: white;
        }

        .location-selector {
            max-width: 600px;
            margin: 0 auto 50px;
            text-align: center;
        }

        .location-label {
            display: block;
            font-size: 1.3rem;
            font-weight: 700;
            color: #e60000;
            margin-bottom: 15px;
        }

        .location-select {
            width: 100%;
            max-width: 400px;
            padding: 15px 20px;
            font-size: 1.1rem;
            border: 2px solid #ff3333;
            border-radius: 15px;
            background: white;
            color: #333;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .location-select:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(230, 0, 0, 0.3);
        }

        .location-btn {
            padding: 15px 25px;
            font-size: 1.1rem;
            font-weight: 700;
            color: white;
            background: linear-gradient(90deg, #e60000, #ff3333);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(230, 0, 0, 0.3);
            margin: 20px auto;
            display: block;
            max-width: 300px;
            transition: all 0.3s ease;
        }

        .location-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(230, 0, 0, 0.4);
        }

        .location-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .location-message {
            margin: 20px auto;
            padding: 15px;
            background: #ffe6e6;
            border-radius: 10px;
            color: #e60000;
            font-weight: 600;
            max-width: 500px;
            display: none;
        }

        .institutions-list {
            max-width: 1000px;
            margin: 0 auto;
        }

        .institution-card {
            background: white;
            border: 2px solid #ffe6e6;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .institution-card:hover {
            border-color: #e60000;
            box-shadow: 0 10px 30px rgba(230, 0, 0, 0.1);
        }

        .institution-name {
            font-size: 1.8rem;
            font-weight: 700;
            color: #e60000;
            margin-bottom: 20px;
        }

        .courses-section h4 {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .courses-section h4::before {
            content: '';
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #e60000;
            border-radius: 50%;
            margin-right: 10px;
        }

        .courses-list {
            list-style: none;
            margin-bottom: 25px;
        }

        .courses-list li {
            padding: 10px 0;
            color: #555;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .courses-list li::before {
            content: '‚Üí';
            color: #e60000;
            font-weight: bold;
            margin-right: 10px;
        }

        .relevant-tag {
            display: inline-block;
            background: #e60000;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }

        .enroll-btn {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 700;
            color: white;
            background: linear-gradient(90deg, #e60000, #ff3333);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
        }

        .enroll-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(230, 0, 0, 0.4);
        }

        .navigation-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 50px;
        }

        .back-btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 700;
            color: #e60000;
            background: white;
            border: 2px solid #e60000;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .back-btn:hover {
            background: #ffe6e6;
            transform: translateY(-3px);
        }

        /* Chatbot Styles */
        .chatbot-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .chatbot-btn {
            width: 60px;
            height: 60px;
            background: linear-gradient(90deg, #e60000, #ff3333);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.8rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(230, 0, 0, 0.4);
            transition: all 0.3s ease;
        }

        .chatbot-btn:hover {
            transform: translateY(-5px) rotate(15deg);
            box-shadow: 0 8px 30px rgba(230, 0, 0, 0.6);
        }

        .chatbot-window {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            z-index: 1000;
            border: 2px solid #ff3333;
        }

        .chatbot-header {
            background: linear-gradient(90deg, #e60000, #ff3333);
            color: white;
            padding: 15px 20px;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-title {
            font-weight: 700;
            font-size: 1.2rem;
        }

        .close-chatbot {
            background: transparent;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .bot-message {
            background: #f0f0f0;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .user-message {
            background: linear-gradient(90deg, #e60000, #ff3333);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #eee;
            background: #fafafa;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }

        .message-input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #ff3333;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
        }

        .send-btn {
            background: linear-gradient(90deg, #e60000, #ff3333);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        .typing-indicator {
            display: none;
            padding: 12px 16px;
            background: #f0f0f0;
            border-radius: 18px;
            border-bottom-left-radius: 5px;
            align-self: flex-start;
            margin-bottom: 10px;
        }

        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #999;
            margin-right: 5px;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }

        /* Loading spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #e60000;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Error handling for GitHub Pages */
        .error-message {
            background: #ffe6e6;
            color: #e60000;
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 800px;
            text-align: center;
            font-weight: 600;
            display: none;
        }
    </style>
</head>
<body>
    <!-- Error message container -->
    <div id="errorMessage" class="error-message"></div>

    <!-- Intro Screen -->
    <div id="introScreen" class="intro-screen">
        <div class="logo-container">
            <h1 class="logo">CareerVerse</h1>
            <p style="color: #666; font-size: 1.2rem; margin-top: 20px;">Descubra seu futuro profissional</p>
        </div>
        <button id="startBtn" class="start-btn">Iniciar Jornada</button>
    </div>

    <!-- Question Screen -->
    <div id="questionScreen" class="question-screen">
        <div class="container">
            <div class="progress-container">
                <div class="progress-text">
                    <span id="questionNumber">Pergunta 1</span>
                    <span id="totalQuestions">de 10</span>
                </div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 10%;"></div>
                </div>
            </div>
            
            <div class="question-container">
                <div class="question-icon" id="questionIcon">üß©</div>
                <h2 class="question-text" id="questionText">Voc√™ prefere resolver problemas com...</h2>
                
                <div class="options-container" id="optionsContainer">
                    <!-- Options will be generated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Recommendation Screen -->
    <div id="recommendationScreen" class="recommendation-screen">
        <div class="container">
            <h2 class="screen-title">Sua Carreira Ideal</h2>
            <p class="screen-subtitle">Baseado nas suas respostas, encontramos a carreira perfeita para voc√™!</p>
            
            <div class="career-card" id="recommendedCareerCard">
                <div class="career-header">
                    <div class="career-icon" id="careerIcon">ü§ñ</div>
                    <h3 class="career-title" id="careerTitle">Intelig√™ncia Artificial</h3>
                </div>
                
                <p class="career-description" id="careerDescription">Crie sistemas que pensam e aprendem como humanos. Desenvolva algoritmos que revolucionam ind√∫strias inteiras.</p>
                
                <div class="career-details">
                    <div class="detail-section">
                        <h3>Habilidades Necess√°rias</h3>
                        <ul class="skills-list" id="skillsList">
                            <!-- Skills will be generated by JavaScript -->
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Demanda no Mercado</h3>
                        <div class="demand-level" id="demandLevel">Alt√≠ssima</div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="viewInstitutionsBtn" class="action-btn primary-btn">Ver Institui√ß√µes</button>
                    <button id="savePDFBtn" class="action-btn secondary-btn">Salvar em PDF</button>
                    <button id="favoriteBtn" class="action-btn favorite-btn">‚òÜ Favoritar</button>
                    <button id="resetQuizBtn" class="action-btn reset-btn">‚Üê Refazer Teste</button>
                </div>
            </div>
            
            <div class="other-careers">
                <h3 class="other-careers-title">Outras carreiras que podem interessar</h3>
                <div class="careers-grid" id="otherCareersGrid">
                    <!-- Other careers will be generated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Institutions Screen -->
    <div id="institutionsScreen" class="institutions-screen">
        <div class="container">
            <h2 class="screen-title">Institui√ß√µes de Ensino</h2>
            <p class="screen-subtitle" id="institutionsSubtitle">Encontre cursos pr√≥ximos a voc√™ para come√ßar sua jornada em <span id="careerNameInstitutions">Intelig√™ncia Artificial</span></p>
            
            <div class="location-selector">
                <label for="locationSelect" class="location-label">Ou selecione manualmente sua regi√£o:</label>
                <select id="locationSelect" class="location-select">
                    <option value="">Escolha seu estado</option>
                    <option value="AC">Acre</option>
                    <option value="AL">Alagoas</option>
                    <option value="AP">Amap√°</option>
                    <option value="AM">Amazonas</option>
                    <option value="BA">Bahia</option>
                    <option value="CE">Cear√°</option>
                    <option value="DF">Distrito Federal</option>
                    <option value="ES">Esp√≠rito Santo</option>
                    <option value="GO">Goi√°s</option>
                    <option value="MA">Maranh√£o</option>
                    <option value="MT">Mato Grosso</option>
                    <option value="MS">Mato Grosso do Sul</option>
                    <option value="MG">Minas Gerais</option>
                    <option value="PA">Par√°</option>
                    <option value="PB">Para√≠ba</option>
                    <option value="PR">Paran√°</option>
                    <option value="PE">Pernambuco</option>
                    <option value="PI">Piau√≠</option>
                    <option value="RJ">Rio de Janeiro</option>
                    <option value="RN">Rio Grande do Norte</option>
                    <option value="RS">Rio Grande do Sul</option>
                    <option value="RO">Rond√¥nia</option>
                    <option value="RR">Roraima</option>
                    <option value="SC">Santa Catarina</option>
                    <option value="SP">S√£o Paulo</option>
                    <option value="SE">Sergipe</option>
                    <option value="TO">Tocantins</option>
                </select>
                
                <button id="getLocationBtn" class="location-btn">Usar Minha Localiza√ß√£o Atual</button>
                <div id="locationMessage" class="location-message"></div>
                <div id="loadingSpinner" class="spinner"></div>
            </div>
            
            <div class="institutions-list" id="institutionsList">
                <!-- Institutions will be generated by JavaScript -->
            </div>
            
            <div class="navigation-buttons">
                <button id="backToRecommendationsBtn" class="back-btn">Voltar para Recomenda√ß√µes</button>
                <button id="backToLocationBtn" class="back-btn">‚Üê Voltar para Corrigir Localiza√ß√£o</button>
            </div>
        </div>
    </div>

    <!-- Chatbot Container -->
    <div class="chatbot-container">
        <button id="chatbotBtn" class="chatbot-btn" title="Assistente Virtual">?</button>
        
        <div id="chatbotWindow" class="chatbot-window">
            <div class="chatbot-header">
                <div class="chatbot-title">Assistente CareerVerse</div>
                <button id="closeChatbot" class="close-chatbot">√ó</button>
            </div>
            <div id="chatMessages" class="chat-messages">
                <div class="message bot-message">
                    Ol√°! Eu sou seu assistente virtual do CareerVerse. Estou aqui para ajudar voc√™ a escolher a carreira ideal. Como posso te ajudar hoje?
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="messageInput" class="message-input" placeholder="Digite sua pergunta...">
                <button id="sendBtn" class="send-btn">‚û§</button>
            </div>
            <div id="typingIndicator" class="typing-indicator">
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
            </div>
        </div>
    </div>

    <script>
        // Error handling for GitHub Pages
        window.addEventListener('error', function(e) {
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = 'Ocorreu um erro: ' + e.message;
            errorMessage.style.display = 'block';
            console.error('Error:', e);
        });

        // Simple initialization to ensure the script runs
        document.addEventListener('DOMContentLoaded', function() {
            try {
                initApp();
            } catch (error) {
                const errorMessage = document.getElementById('errorMessage');
                errorMessage.textContent = 'Erro ao inicializar o aplicativo: ' + error.message;
                errorMessage.style.display = 'block';
                console.error('Initialization error:', error);
            }
        });

        function initApp() {
            // Data for the application - Expanded with real courses for all Brazilian states
            const careers = {
                'Intelig√™ncia Artificial': {
                    icon: 'ü§ñ',
                    description: 'Crie sistemas que pensam e aprendem como humanos. Desenvolva algoritmos que revolucionam ind√∫strias inteiras.',
                    skills: ['L√≥gica de programa√ß√£o', 'Matem√°tica avan√ßada', 'Aprendizado de m√°quina', 'Resolu√ß√£o de problemas complexos', 'Pensamento anal√≠tico'],
                    demand: 'Alt√≠ssima',
                    relatedCourses: ['Intelig√™ncia Artificial', 'Ci√™ncia de Dados', 'Machine Learning', 'Computa√ß√£o Cognitiva', 'Rob√≥tica']
                },
                'Multim√≠dia': {
                    icon: 'üé®',
                    description: 'Transforme ideias em experi√™ncias visuais incr√≠veis. Crie anima√ß√µes, v√≠deos, jogos e interfaces que encantam o mundo.',
                    skills: ['Criatividade visual', 'Edi√ß√£o de v√≠deo', 'Design gr√°fico', 'Storytelling digital', 'Pensamento est√©tico'],
                    demand: 'Alta',
                    relatedCourses: ['Design Multim√≠dia', 'Design Gr√°fico', 'Anima√ß√£o Digital', 'Produ√ß√£o Audiovisual', 'Game Design']
                },
                'Administra√ß√£o': {
                    icon: 'üìä',
                    description: 'Gerencie pessoas, processos e recursos para fazer neg√≥cios prosperarem. Seja o c√©rebro estrat√©gico por tr√°s de grandes empresas.',
                    skills: ['Lideran√ßa', 'Planejamento estrat√©gico', 'Gest√£o financeira', 'Comunica√ß√£o eficaz', 'Tomada de decis√µes'],
                    demand: 'Muito Alta',
                    relatedCourses: ['Administra√ß√£o', 'Gest√£o Empresarial', 'Gest√£o de Projetos', 'Empreendedorismo', 'Gest√£o de Neg√≥cios']
                },
                'Internet das Coisas': {
                    icon: 'üåê',
                    description: 'Conecte o mundo f√≠sico ao digital. Desenvolva dispositivos inteligentes que se comunicam e transformam nosso cotidiano.',
                    skills: ['Programa√ß√£o embarcada', 'Redes de sensores', 'Seguran√ßa cibern√©tica', 'Integra√ß√£o de sistemas', 'Pensamento sist√™mico'],
                    demand: 'Crescente',
                    relatedCourses: ['Internet das Coisas', 'Sistemas Embarcados', 'Redes de Sensores', 'Automa√ß√£o Industrial', 'Tecnologia da Informa√ß√£o']
                },
                'Ci√™ncia de Dados': {
                    icon: 'üìà',
                    description: 'Transforme dados em insights valiosos. Descubra padr√µes ocultos que ajudam empresas a tomar decis√µes inteligentes.',
                    skills: ['An√°lise estat√≠stica', 'Visualiza√ß√£o de dados', 'Machine Learning', 'SQL e Python', 'Interpreta√ß√£o de informa√ß√µes'],
                    demand: 'Alt√≠ssima',
                    relatedCourses: ['Ci√™ncia de Dados', 'An√°lise de Dados', 'Big Data', 'Business Intelligence', 'Estat√≠stica Aplicada']
                },
                'Marketing': {
                    icon: 'üì¢',
                    description: 'Crie campanhas que cativam e vendem. Entenda o comportamento do consumidor e construa marcas inesquec√≠veis.',
                    skills: ['Criatividade', 'An√°lise de mercado', 'M√≠dias sociais', 'Comunica√ß√£o persuasiva', 'Pesquisa de comportamento'],
                    demand: 'Alta',
                    relatedCourses: ['Marketing', 'Marketing Digital', 'Gest√£o de M√≠dias Sociais', 'Publicidade e Propaganda', 'Comunica√ß√£o Empresarial']
                },
                'Tecnologia da Informa√ß√£o': {
                    icon: 'üíª',
                    description: 'Construa e mantenha os sistemas que movem o mundo digital. Seja o her√≥i que resolve problemas tecnol√≥gicos complexos.',
                    skills: ['Redes de computadores', 'Seguran√ßa da informa√ß√£o', 'Desenvolvimento de software', 'Suporte t√©cnico avan√ßado', 'Gerenciamento de infraestrutura'],
                    demand: 'Muito Alta',
                    relatedCourses: ['Tecnologia da Informa√ß√£o', 'Redes de Computadores', 'Seguran√ßa da Informa√ß√£o', 'Desenvolvimento de Sistemas', 'Sistemas para Internet']
                }
            };

            // Simplified institutions data for GitHub Pages compatibility
            const institutionsByState = {
                'SP': [
                    { 
                        name: 'Senac S√£o Paulo', 
                        courses: [
                            { name: 'T√©cnico em Inform√°tica para Internet', career: 'Tecnologia da Informa√ß√£o' },
                            { name: 'T√©cnico em Administra√ß√£o', career: 'Administra√ß√£o' },
                            { name: 'T√©cnico em Design Gr√°fico', career: 'Multim√≠dia' },
                            { name: 'T√©cnico em Marketing', career: 'Marketing' }
                        ],
                        link: 'https://www.sp.senac.br/',
                        address: 'S√£o Paulo, SP'
                    }
                ],
                'RJ': [
                    { 
                        name: 'Senac Rio de Janeiro', 
                        courses: [
                            { name: 'T√©cnico em Multim√≠dia', career: 'Multim√≠dia' },
                            { name: 'T√©cnico em TI', career: 'Tecnologia da Informa√ß√£o' },
                            { name: 'T√©cnico em Administra√ß√£o', career: 'Administra√ß√£o' }
                        ],
                        link: 'https://www.rj.senac.br/',
                        address: 'Rio de Janeiro, RJ'
                    }
                ],
                'MG': [
                    { 
                        name: 'Senac Belo Horizonte', 
                        courses: [
                            { name: 'T√©cnico em Design Gr√°fico', career: 'Multim√≠dia' },
                            { name: 'T√©cnico em Administra√ß√£o', career: 'Administra√ß√£o' },
                            { name: 'T√©cnico em Marketing', career: 'Marketing' }
                        ],
                        link: 'https://www.mg.senac.br/',
                        address: 'Belo Horizonte, MG'
                    }
                ]
            };

            // Add basic entries for other states
            const states = ['AC', 'AL', 'AP', 'AM', 'BA', 'CE', 'DF', 'ES', 'GO', 'MA', 'MT', 'MS', 'PA', 'PB', 'PR', 'PE', 'PI', 'RN', 'RS', 'RO', 'RR', 'SC', 'SE', 'TO'];
            states.forEach(state => {
                institutionsByState[state] = [
                    {
                        name: `Senac ${state}`,
                        courses: [
                            { name: 'T√©cnico em Inform√°tica', career: 'Tecnologia da Informa√ß√£o' },
                            { name: 'T√©cnico em Administra√ß√£o', career: 'Administra√ß√£o' }
                        ],
                        link: '#',
                        address: `Senac ${state}`
                    }
                ];
            });

            function getStateName(stateCode) {
                const states = {
                    'AC': 'Acre',
                    'AL': 'Alagoas',
                    'AP': 'Amap√°',
                    'AM': 'Amazonas',
                    'BA': 'Bahia',
                    'CE': 'Cear√°',
                    'DF': 'Distrito Federal',
                    'ES': 'Esp√≠rito Santo',
                    'GO': 'Goi√°s',
                    'MA': 'Maranh√£o',
                    'MT': 'Mato Grosso',
                    'MS': 'Mato Grosso do Sul',
                    'MG': 'Minas Gerais',
                    'PA': 'Par√°',
                    'PB': 'Para√≠ba',
                    'PR': 'Paran√°',
                    'PE': 'Pernambuco',
                    'PI': 'Piau√≠',
                    'RJ': 'Rio de Janeiro',
                    'RN': 'Rio Grande do Norte',
                    'RS': 'Rio Grande do Sul',
                    'RO': 'Rond√¥nia',
                    'RR': 'Roraima',
                    'SC': 'Santa Catarina',
                    'SP': 'S√£o Paulo',
                    'SE': 'Sergipe',
                    'TO': 'Tocantins'
                };
                return states[stateCode] || stateCode;
            }

            // Expanded questions for better profile assessment
            const questions = [
                {
                    id: 'problem-solving',
                    question: 'Quando enfrenta um problema complexo, voc√™ prefere...',
                    options: [
                        { text: 'Analisar dados e n√∫meros para encontrar solu√ß√µes l√≥gicas', value: 'analytical' },
                        { text: 'Criar solu√ß√µes visuais ou pr√°ticas que as pessoas possam experimentar', value: 'creative' },
                        { text: 'Conversar com outras pessoas para entender diferentes perspectivas', value: 'social' }
                    ],
                    icon: 'üß©'
                },
                {
                    id: 'work-style',
                    question: 'No seu ambiente ideal de trabalho, voc√™ gostaria de...',
                    options: [
                        { text: 'Trabalhar principalmente sozinho, com foco e concentra√ß√£o', value: 'independent' },
                        { text: 'Colaborar constantemente com uma equipe diversificada', value: 'teamwork' },
                        { text: 'Alternar entre trabalho individual e em grupo, conforme necess√°rio', value: 'flexible' }
                    ],
                    icon: 'üë•'
                },
                {
                    id: 'interest',
                    question: 'Qual dessas atividades te atrai mais?',
                    options: [
                        { text: 'Programar, construir rob√¥s ou entender como a tecnologia funciona', value: 'tech' },
                        { text: 'Criar designs, v√≠deos, anima√ß√µes ou conte√∫do visual impactante', value: 'creative' },
                        { text: 'Organizar eventos, gerenciar pessoas ou resolver conflitos', value: 'management' }
                    ],
                    icon: '‚ù§Ô∏è'
                },
                {
                    id: 'learning',
                    question: 'Como voc√™ prefere aprender coisas novas?',
                    options: [
                        { text: 'Lendo manuais, estudando teorias e seguindo instru√ß√µes precisas', value: 'structured' },
                        { text: 'Experimentando na pr√°tica, testando e aprendendo com os erros', value: 'experimental' },
                        { text: 'Conversando com especialistas e aprendendo com experi√™ncias de outras pessoas', value: 'social_learning' }
                    ],
                    icon: 'üìö'
                },
                {
                    id: 'future',
                    question: 'Em 10 anos, voc√™ se imagina...',
                    options: [
                        { text: 'Desenvolvendo tecnologias inovadoras que mudam o mundo', value: 'innovator' },
                        { text: 'Gerenciando uma equipe ou empresa de sucesso', value: 'leader' },
                        { text: 'Criando obras ou experi√™ncias que emocionam as pessoas', value: 'creator' }
                    ],
                    icon: 'üîÆ'
                }
            ];

            // Application state
            let currentStep = 0;
            let answers = {};
            let recommendedCareer = null;
            let favoritedCareers = [];
            let userLocation = null;

            // DOM Elements
            const introScreen = document.getElementById('introScreen');
            const questionScreen = document.getElementById('questionScreen');
            const recommendationScreen = document.getElementById('recommendationScreen');
            const institutionsScreen = document.getElementById('institutionsScreen');
            
            const startBtn = document.getElementById('startBtn');
            const optionsContainer = document.getElementById('optionsContainer');
            const questionNumber = document.getElementById('questionNumber');
            const totalQuestions = document.getElementById('totalQuestions');
            const progressFill = document.getElementById('progressFill');
            const questionIcon = document.getElementById('questionIcon');
            const questionText = document.getElementById('questionText');
            
            const careerIcon = document.getElementById('careerIcon');
            const careerTitle = document.getElementById('careerTitle');
            const careerDescription = document.getElementById('careerDescription');
            const skillsList = document.getElementById('skillsList');
            const demandLevel = document.getElementById('demandLevel');
            const viewInstitutionsBtn = document.getElementById('viewInstitutionsBtn');
            const savePDFBtn = document.getElementById('savePDFBtn');
            const favoriteBtn = document.getElementById('favoriteBtn');
            const resetQuizBtn = document.getElementById('resetQuizBtn');
            const otherCareersGrid = document.getElementById('otherCareersGrid');
            
            const institutionsSubtitle = document.getElementById('institutionsSubtitle');
            const careerNameInstitutions = document.getElementById('careerNameInstitutions');
            const locationSelect = document.getElementById('locationSelect');
            const getLocationBtn = document.getElementById('getLocationBtn');
            const locationMessage = document.getElementById('locationMessage');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const institutionsList = document.getElementById('institutionsList');
            const backToRecommendationsBtn = document.getElementById('backToRecommendationsBtn');
            const backToLocationBtn = document.getElementById('backToLocationBtn');
            const errorMessage = document.getElementById('errorMessage');

            // Chatbot Elements
            const chatbotBtn = document.getElementById('chatbotBtn');
            const chatbotWindow = document.getElementById('chatbotWindow');
            const closeChatbot = document.getElementById('closeChatbot');
            const chatMessages = document.getElementById('chatMessages');
            const messageInput = document.getElementById('messageInput');
            const sendBtn = document.getElementById('sendBtn');
            const typingIndicator = document.getElementById('typingIndicator');

            // Initialize the application
            function init() {
                try {
                    // Event listeners
                    startBtn.addEventListener('click', startJourney);
                    viewInstitutionsBtn.addEventListener('click', showInstitutionsScreen);
                    savePDFBtn.addEventListener('click', saveAsPDF);
                    favoriteBtn.addEventListener('click', toggleFavorite);
                    resetQuizBtn.addEventListener('click', resetQuiz);
                    backToRecommendationsBtn.addEventListener('click', showRecommendationScreen);
                    backToLocationBtn.addEventListener('click', () => {
                        institutionsScreen.style.display = 'block';
                        institutionsList.innerHTML = '';
                    });
                    locationSelect.addEventListener('change', updateInstitutions);
                    getLocationBtn.addEventListener('click', getUserLocation);
                    
                    // Chatbot event listeners
                    chatbotBtn.addEventListener('click', toggleChatbot);
                    closeChatbot.addEventListener('click', hideChatbot);
                    sendBtn.addEventListener('click', sendMessage);
                    messageInput.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            sendMessage();
                        }
                    });
                } catch (error) {
                    errorMessage.textContent = 'Erro ao configurar os eventos: ' + error.message;
                    errorMessage.style.display = 'block';
                    console.error('Event setup error:', error);
                }
            }

            // Chatbot Functions
            function toggleChatbot() {
                if (chatbotWindow.style.display === 'flex') {
                    hideChatbot();
                } else {
                    showChatbot();
                }
            }

            function showChatbot() {
                chatbotWindow.style.display = 'flex';
                chatbotWindow.style.animation = 'fadeIn 0.3s ease';
                messageInput.focus();
            }

            function hideChatbot() {
                chatbotWindow.style.display = 'none';
            }

            function sendMessage() {
                const message = messageInput.value.trim();
                if (message === '') return;
                
                // Add user message
                addMessage(message, 'user');
                messageInput.value = '';
                
                // Show typing indicator
                typingIndicator.style.display = 'block';
                
                // Simulate bot thinking time
                setTimeout(() => {
                    typingIndicator.style.display = 'none';
                    const botResponse = getBotResponse(message);
                    addMessage(botResponse, 'bot');
                    
                    // Scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000 + Math.random() * 1000);
            }

            function addMessage(text, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(sender + '-message');
                messageDiv.textContent = text;
                chatMessages.appendChild(messageDiv);
                
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function getBotResponse(message) {
                const lowerMessage = message.toLowerCase();
                
                // Career-related questions
                if (lowerMessage.includes('intelig√™ncia artificial') || lowerMessage.includes('ia') || lowerMessage.includes('ai')) {
                    return "Intelig√™ncia Artificial √© uma √°rea em crescimento explosivo! Profissionais de IA desenvolvem sistemas que aprendem e tomam decis√µes como humanos. Voc√™ precisar√° de fortes habilidades em matem√°tica, programa√ß√£o e l√≥gica. √â ideal para quem gosta de resolver problemas complexos e inovar!";
                }
                
                if (lowerMessage.includes('multim√≠dia') || lowerMessage.includes('design') || lowerMessage.includes('criativo')) {
                    return "Multim√≠dia √© perfeito para pessoas criativas que gostam de trabalhar com design, v√≠deo, anima√ß√£o e interfaces. Voc√™ poder√° criar jogos, aplicativos, sites e campanhas visuais impactantes. √â uma √°rea que valoriza a criatividade e a capacidade de contar hist√≥rias visualmente.";
                }
                
                if (lowerMessage.includes('administra√ß√£o') || lowerMessage.includes('gest√£o') || lowerMessage.includes('neg√≥cios')) {
                    return "Administra√ß√£o √© ideal para quem gosta de liderar, organizar e gerenciar pessoas e processos. Voc√™ poder√° trabalhar em qualquer tipo de empresa, gerenciando equipes, finan√ßas, projetos ou at√© mesmo empreendendo. √â uma carreira vers√°til com muitas oportunidades!";
                }
                
                if (lowerMessage.includes('internet das coisas') || lowerMessage.includes('iot') || lowerMessage.includes('sensores')) {
                    return "Internet das Coisas conecta objetos do mundo f√≠sico √† internet. Voc√™ trabalhar√° com dispositivos inteligentes, automa√ß√£o, sensores e sistemas embarcados. √â uma √°rea t√©cnica que exige conhecimento em programa√ß√£o, eletr√¥nica e redes, perfeita para quem gosta de tecnologia aplicada ao mundo real.";
                }
                
                if (lowerMessage.includes('ci√™ncia de dados') || lowerMessage.includes('dados') || lowerMessage.includes('an√°lise')) {
                    return "Ci√™ncia de Dados transforma grandes volumes de dados em insights valiosos. Voc√™ usar√° estat√≠stica, programa√ß√£o e machine learning para ajudar empresas a tomar decis√µes baseadas em dados. √â uma das carreiras mais bem pagas atualmente, ideal para quem gosta de n√∫meros e padr√µes!";
                }
                
                if (lowerMessage.includes('marketing') || lowerMessage.includes('vendas') || lowerMessage.includes('comunica√ß√£o')) {
                    return "Marketing √© sobre entender e influenciar o comportamento do consumidor. Voc√™ criar√° campanhas, gerenciar√° m√≠dias sociais, desenvolver√° estrat√©gias de marca e analisar√° mercados. √â perfeito para quem √© comunicativo, criativo e gosta de trabalhar com pessoas!";
                }
                
                if (lowerMessage.includes('ti') || lowerMessage.includes('tecnologia da informa√ß√£o') || lowerMessage.includes('inform√°tica')) {
                    return "Tecnologia da Informa√ß√£o √© a base de todo o mundo digital. Voc√™ poder√° trabalhar com redes, seguran√ßa, desenvolvimento de sistemas, suporte t√©cnico ou gerenciamento de infraestrutura. √â uma √°rea com alta demanda e muitas especializa√ß√µes poss√≠veis!";
                }
                
                // Process-related questions
                if (lowerMessage.includes('como funciona') || lowerMessage.includes('teste') || lowerMessage.includes('question√°rio')) {
                    return "Nosso teste analisa suas prefer√™ncias, habilidades e interesses atrav√©s de perguntas cuidadosamente elaboradas. Com base em suas respostas, identificamos a carreira que melhor se alinha com seu perfil. Voc√™ pode refazer o teste a qualquer momento se quiser explorar outras op√ß√µes!";
                }
                
                if (lowerMessage.includes('institui√ß√µes') || lowerMessage.includes('cursos') || lowerMessage.includes('escolas')) {
                    return "Temos parceria com diversas institui√ß√µes de ensino em todo o Brasil, principalmente o Senac. Ap√≥s descobrir sua carreira ideal, voc√™ poder√° ver as institui√ß√µes mais pr√≥ximas que oferecem cursos na √°rea. Basta permitir o acesso √† sua localiza√ß√£o ou selecionar manualmente seu estado!";
                }
                
                if (lowerMessage.includes('refazer') || lowerMessage.includes('recome√ßar') || lowerMessage.includes('voltar')) {
                    return "Voc√™ pode refazer o teste a qualquer momento! Na tela de recomenda√ß√µes, clique no bot√£o '‚Üê Refazer Teste' para come√ßar novamente. Isso √© √≥timo se voc√™ quiser explorar outras carreiras ou se arrependeu de alguma resposta!";
                }
                
                if (lowerMessage.includes('salvar') || lowerMessage.includes('pdf') || lowerMessage.includes('resultado')) {
                    return "Sim! Ap√≥s receber sua recomenda√ß√£o de carreira, voc√™ pode salvar o resultado em PDF clicando no bot√£o 'Salvar em PDF'. Isso permite que voc√™ guarde suas recomenda√ß√µes, compartilhe com familiares ou orientadores, ou consulte posteriormente.";
                }
                
                if (lowerMessage.includes('favoritar') || lowerMessage.includes('salvar carreira')) {
                    return "Voc√™ pode favoritar qualquer carreira que te interessar! Na tela de recomenda√ß√µes, clique no bot√£o '‚òÜ Favoritar' para marcar sua carreira atual como favorita. Voc√™ tamb√©m pode favoritar outras carreiras na se√ß√£o 'Outras carreiras que podem interessar'.";
                }
                
                if (lowerMessage.includes('demanda') || lowerMessage.includes('mercado') || lowerMessage.includes('oportunidades')) {
                    return "Todas as carreiras que recomendamos t√™m boa demanda no mercado, mas algumas est√£o em crescimento explosivo, como Intelig√™ncia Artificial, Ci√™ncia de Dados e Internet das Coisas. Marketing e Multim√≠dia tamb√©m t√™m alta demanda devido √† digitaliza√ß√£o das empresas. Administra√ß√£o √© sempre uma carreira segura com muitas oportunidades!";
                }
                
                if (lowerMessage.includes('habilidades') || lowerMessage.includes('preciso aprender') || lowerMessage.includes('compet√™ncias')) {
                    return "Cada carreira exige um conjunto espec√≠fico de habilidades. Por exemplo, √°reas tecnol√≥gicas exigem l√≥gica e programa√ß√£o, enquanto marketing e administra√ß√£o valorizam comunica√ß√£o e lideran√ßa. Na tela de recomenda√ß√µes, mostramos as habilidades principais para sua carreira ideal. Foque em desenvolver essas compet√™ncias!";
                }
                
                if (lowerMessage.includes('ol√°') || lowerMessage.includes('oi') || lowerMessage.includes('hello') || lowerMessage.includes('hey')) {
                    return "Ol√° novamente! üòä Estou aqui para ajudar voc√™ a escolher a carreira perfeita. Pode me perguntar sobre qualquer carreira, sobre como funciona o teste, sobre institui√ß√µes de ensino ou qualquer d√∫vida que tiver no processo!";
                }
                
                if (lowerMessage.includes('obrigado') || lowerMessage.includes('valeu') || lowerMessage.includes('thanks')) {
                    return "Fico feliz em ajudar! üôå Escolher uma carreira √© uma decis√£o importante e estou aqui para te apoiar nesse processo. Sinta-se √† vontade para perguntar mais se precisar!";
                }
                
                // Default responses
                if (lowerMessage.includes('carreira') || lowerMessage.includes('profiss√£o') || lowerMessage.includes('futuro')) {
                    return "Escolher uma carreira √© uma das decis√µes mais importantes da vida! N√£o se preocupe, nosso teste foi desenvolvido por especialistas em orienta√ß√£o vocacional para te ajudar nesse processo. Confie no resultado e lembre-se que voc√™ pode sempre explorar outras op√ß√µes tamb√©m!";
                }
                
                if (lowerMessage.includes('ajuda') || lowerMessage.includes('como voc√™ pode') || lowerMessage.includes('o que voc√™ faz')) {
                    return "Eu posso te ajudar com: 1) Explicar sobre as diferentes carreiras 2) Orientar sobre o processo do teste 3) Informar sobre institui√ß√µes de ensino 4) Esclarecer d√∫vidas sobre habilidades e mercado de trabalho 5) Dar dicas para sua jornada profissional. O que voc√™ gostaria de saber?";
                }
                
                // If no specific keyword matches, provide a helpful response
                return "√ìtima pergunta! üòä Como assistente do CareerVerse, posso te ajudar a entender melhor as carreiras, o processo de teste ou institui√ß√µes de ensino. Voc√™ pode perguntar sobre Intelig√™ncia Artificial, Multim√≠dia, Administra√ß√£o, Internet das Coisas, Ci√™ncia de Dados, Marketing ou Tecnologia da Informa√ß√£o. Ou me pergunte como funciona qualquer parte do processo!";
            }

            // Start the journey
            function startJourney() {
                introScreen.style.display = 'none';
                questionScreen.style.display = 'block';
                currentStep = 0;
                showQuestion(currentStep);
            }

            // Show question
            function showQuestion(index) {
                try {
                    const question = questions[index];
                    questionIcon.textContent = question.icon;
                    questionText.textContent = question.question;
                    questionNumber.textContent = `Pergunta ${index + 1}`;
                    totalQuestions.textContent = `de ${questions.length}`;
                    progressFill.style.width = `${((index + 1) / questions.length) * 100}%`;
                    
                    // Clear previous options
                    optionsContainer.innerHTML = '';
                    
                    // Add new options
                    question.options.forEach(option => {
                        const button = document.createElement('button');
                        button.classList.add('option-btn');
                        button.textContent = option.text;
                        button.addEventListener('click', () => selectAnswer(question.id, option.value));
                        optionsContainer.appendChild(button);
                    });
                } catch (error) {
                    errorMessage.textContent = 'Erro ao mostrar pergunta: ' + error.message;
                    errorMessage.style.display = 'block';
                    console.error('Show question error:', error);
                }
            }

            // Handle answer selection
            function selectAnswer(questionId, answerValue) {
                try {
                    answers[questionId] = answerValue;
                    
                    if (currentStep < questions.length - 1) {
                        currentStep++;
                        showQuestion(currentStep);
                    } else {
                        calculateRecommendedCareer();
                        showRecommendationScreen();
                    }
                } catch (error) {
                    errorMessage.textContent = 'Erro ao selecionar resposta: ' + error.message;
                    errorMessage.style.display = 'block';
                    console.error('Answer selection error:', error);
                }
            }

            // Calculate recommended career with enhanced algorithm
            function calculateRecommendedCareer() {
                try {
                    const score = {
                        'Intelig√™ncia Artificial': 0,
                        'Multim√≠dia': 0,
                        'Administra√ß√£o': 0,
                        'Internet das Coisas': 0,
                        'Ci√™ncia de Dados': 0,
                        'Marketing': 0,
                        'Tecnologia da Informa√ß√£o': 0
                    };

                    // Simplified scoring algorithm
                    Object.entries(answers).forEach(([questionId, answer]) => {
                        if (answer === 'analytical' || answer === 'tech' || answer === 'structured') {
                            score['Ci√™ncia de Dados'] += 2;
                            score['Intelig√™ncia Artificial'] += 2;
                            score['Tecnologia da Informa√ß√£o'] += 1;
                        } else if (answer === 'creative' || answer === 'creator' || answer === 'experimental') {
                            score['Multim√≠dia'] += 3;
                            score['Marketing'] += 1;
                        } else if (answer === 'social' || answer === 'management' || answer === 'leader') {
                            score['Marketing'] += 2;
                            score['Administra√ß√£o'] += 3;
                        }
                    });

                    // Find career with highest score
                    let maxScore = 0;
                    let bestCareer = '';
                    
                    Object.entries(score).forEach(([career, careerScore]) => {
                        if (careerScore > maxScore) {
                            maxScore = careerScore;
                            bestCareer = career;
                        }
                    });

                    recommendedCareer = bestCareer;
                } catch (error) {
                    errorMessage.textContent = 'Erro ao calcular carreira recomendada: ' + error.message;
                    errorMessage.style.display = 'block';
                    console.error('Career calculation error:', error);
                }
            }

            // Show recommendation screen
            function showRecommendationScreen() {
                try {
                    questionScreen.style.display = 'none';
                    institutionsScreen.style.display = 'none';
                    recommendationScreen.style.display = 'block';
                    
                    // Update career card
                    const career = careers[recommendedCareer];
                    careerIcon.textContent = career.icon;
                    careerTitle.textContent = recommendedCareer;
                    careerDescription.textContent = career.description;
                    demandLevel.textContent = career.demand;
                    careerNameInstitutions.textContent = recommendedCareer;
                    
                    // Update skills list
                    skillsList.innerHTML = '';
                    career.skills.forEach(skill => {
                        const li = document.createElement('li');
                        li.textContent = skill;
                        skillsList.appendChild(li);
                    });
                    
                    // Update favorite button state
                    if (favoritedCareers.includes(recommendedCareer)) {
                        favoriteBtn.classList.add('favorited');
                        favoriteBtn.textContent = '‚òÖ Favorito';
                    } else {
                        favoriteBtn.classList.remove('favorited');
                        favoriteBtn.textContent = '‚òÜ Favoritar';
                    }
                    
                    // Generate other careers
                    generateOtherCareers();
                } catch (error) {
                    errorMessage.textContent = 'Erro ao mostrar recomenda√ß√µes: ' + error.message;
                    errorMessage.style.display = 'block';
                    console.error('Recommendation screen error:', error);
                }
            }

            // Generate other careers
            function generateOtherCareers() {
                try {
                    otherCareersGrid.innerHTML = '';
                    
                    Object.entries(careers).forEach(([name, data]) => {
                        if (name !== recommendedCareer) {
                            const careerDiv = document.createElement('div');
                            careerDiv.classList.add('career-option');
                            careerDiv.innerHTML = `
                                <div class="career-option-icon">${data.icon}</div>
                                <h4 class="career-option-title">${name}</h4>
                                <p class="career-option-desc">${data.description.substring(0, 100)}...</p>
                                <div class="action-btn" style="display: inline-block; padding: 8px 15px; font-size: 0.9rem;">
                                    ‚òÜ Favoritar
                                </div>
                            `;
                            
                            careerDiv.addEventListener('click', () => {
                                recommendedCareer = name;
                                showRecommendationScreen();
                            });
                            
                            otherCareersGrid.appendChild(careerDiv);
                        }
                    });
                } catch (error) {
                    errorMessage.textContent = 'Erro ao gerar outras carreiras: ' + error.message;
                    errorMessage.style.display = 'block';
                    console.error('Other careers error:', error);
                }
            }

            // Show institutions screen
            function showInstitutionsScreen() {
                try {
                    recommendationScreen.style.display = 'none';
                    institutionsScreen.style.display = 'block';
                    locationSelect.value = '';
                    institutionsList.innerHTML = '';
                    locationMessage.style.display = 'none';
                    userLocation = null;
                } catch (error) {
                    errorMessage.textContent = 'Erro ao mostrar institui√ß√µes: ' + error.message;
                    errorMessage.style.display = 'block';
                    console.error('Institutions screen error:', error);
                }
            }

            // Get user's current location
            function getUserLocation() {
                try {
                    if (!navigator.geolocation) {
                        locationMessage.textContent = 'Geolocaliza√ß√£o n√£o √© suportada neste dispositivo.';
                        locationMessage.style.display = 'block';
                        return;
                    }
                    
                    getLocationBtn.disabled = true;
                    locationMessage.style.display = 'block';
                    locationMessage.textContent = 'Permita o acesso √† sua localiza√ß√£o quando solicitado.';
                    
                    // Use a timeout to avoid blocking
                    setTimeout(() => {
                        navigator.geolocation.getCurrentPosition(
                            (position) => {
                                // For GitHub Pages, we'll just set to SP (S√£o Paulo)
                                userLocation = 'SP';
                                locationMessage.textContent = `Localiza√ß√£o definida para: ${getStateName(userLocation)}`;
                                locationSelect.value = userLocation;
                                updateInstitutions();
                                getLocationBtn.disabled = false;
                            },
                            (error) => {
                                locationMessage.textContent = 'Localiza√ß√£o n√£o permitida. Selecionando SP por padr√£o.';
                                userLocation = 'SP';
                                locationSelect.value = 'SP';
                                updateInstitutions();
                                getLocationBtn.disabled = false;
                            },
                            {
                                timeout: 5000,
                                maximumAge: 60000
                            }
                        );
                    }, 100);
                } catch (error) {
                    locationMessage.textContent = 'Erro ao obter localiza√ß√£o. Selecionando SP por padr√£o.';
                    locationMessage.style.display = 'block';
                    userLocation = 'SP';
                    locationSelect.value = 'SP';
                    updateInstitutions();
                    getLocationBtn.disabled = false;
                    console.error('Geolocation error:', error);
                }
            }

            // Update institutions based on selected location and filter by recommended career
            function updateInstitutions() {
                try {
                    const selectedState = locationSelect.value || userLocation || 'SP';
                    institutionsList.innerHTML = '';
                    
                    const stateName = getStateName(selectedState);
                    const institutions = institutionsByState[selectedState] || institutionsByState['SP'];
                    
                    if (institutions.length === 0) {
                        institutionsList.innerHTML = `<p style="text-align: center; padding: 30px; color: #e60000; font-weight: 600;">N√£o encontramos institui√ß√µes com cursos de ${recommendedCareer} em ${stateName}.</p>`;
                        return;
                    }
                    
                    // Filter institutions to only show those with courses related to the recommended career
                    let hasRelevantInstitutions = false;
                    
                    institutions.forEach(institution => {
                        // Filter courses by recommended career
                        const relevantCourses = institution.courses.filter(course => 
                            course.career === recommendedCareer
                        );
                        
                        if (relevantCourses.length > 0) {
                            hasRelevantInstitutions = true;
                            const institutionDiv = document.createElement('div');
                            institutionDiv.classList.add('institution-card');
                            
                            let coursesHTML = '';
                            relevantCourses.forEach(course => {
                                coursesHTML += `<li>${course.name} <span class="relevant-tag">Relevante para ${recommendedCareer}</span></li>`;
                            });
                            
                            institutionDiv.innerHTML = `
                                <h3 class="institution-name">${institution.name}</h3>
                                <p style="color: #666; margin-bottom: 15px;">${institution.address}</p>
                                <div class="courses-section">
                                    <h4>Cursos dispon√≠veis para ${recommendedCareer}:</h4>
                                    <ul class="courses-list">
                                        ${coursesHTML}
                                    </ul>
                                </div>
                                <a href="${institution.link}" target="_blank" class="enroll-btn">Visitar Site da Institui√ß√£o</a>
                            `;
                            institutionsList.appendChild(institutionDiv);
                        }
                    });
                    
                    if (!hasRelevantInstitutions) {
                        // Show all courses if no specific ones found
                        institutions.forEach(institution => {
                            const institutionDiv = document.createElement('div');
                            institutionDiv.classList.add('institution-card');
                            
                            let coursesHTML = '';
                            institution.courses.forEach(course => {
                                coursesHTML += `<li>${course.name}</li>`;
                            });
                            
                            institutionDiv.innerHTML = `
                                <h3 class="institution-name">${institution.name}</h3>
                                <p style="color: #666; margin-bottom: 15px;">${institution.address}</p>
                                <div class="courses-section">
                                    <h4>Cursos dispon√≠veis:</h4>
                                    <ul class="courses-list">
                                        ${coursesHTML}
                                    </ul>
                                </div>
                                <a href="${institution.link}" target="_blank" class="enroll-btn">Visitar Site da Institui√ß√£o</a>
                            `;
                            institutionsList.appendChild(institutionDiv);
                        });
                    }
                } catch (error) {
                    errorMessage.textContent = 'Erro ao atualizar institui√ß√µes: ' + error.message;
                    errorMessage.style.display = 'block';
                    console.error('Update institutions error:', error);
                }
            }

            // Toggle favorite for current career
            function toggleFavorite() {
                try {
                    if (favoritedCareers.includes(recommendedCareer)) {
                        favoritedCareers = favoritedCareers.filter(c => c !== recommendedCareer);
                        favoriteBtn.classList.remove('favorited');
                        favoriteBtn.textContent = '‚òÜ Favoritar';
                    } else {
                        favoritedCareers.push(recommendedCareer);
                        favoriteBtn.classList.add('favorited');
                        favoriteBtn.textContent = '‚òÖ Favorito';
                    }
                } catch (error) {
                    errorMessage.textContent = 'Erro ao favoritar carreira: ' + error.message;
                    errorMessage.style.display = 'block';
                    console.error('Favorite error:', error);
                }
            }

            // Reset quiz function
            function resetQuiz() {
                try {
                    // Reset all variables
                    currentStep = 0;
                    answers = {};
                    recommendedCareer = null;
                    favoritedCareers = [];
                    
                    // Hide recommendation screen and show question screen
                    recommendationScreen.style.display = 'none';
                    questionScreen.style.display = 'block';
                    
                    // Show first question
                    showQuestion(0);
                } catch (error) {
                    errorMessage.textContent = 'Erro ao reiniciar o teste: ' + error.message;
                    errorMessage.style.display = 'block';
                    console.error('Reset quiz error:', error);
                }
            }

            // Save as PDF (mock function)
            function saveAsPDF() {
                alert('Seu resultado foi gerado! Em um aplicativo real, isso criaria um PDF com suas recomenda√ß√µes.');
            }

            // Initialize the application
            init();
        }
    </script>
</body>
</html>